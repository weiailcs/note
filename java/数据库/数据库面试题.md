### mysql的逻辑架构了解吗？
答：主要包括服务层和存储引擎层。
- 服务层

连接器：建立管理与客户端的连接

查询缓存：存数据

分析器：词法语法分析

优化器：选择合适索引，制定执行计划

执行器：调用存储引擎，执行执行计划

- 存储引擎层
  

存储引擎负责MySQL中数据的存储和提取（提供了API给服务层）

### MySQL读写锁
答：就是共享锁和排它锁，共享锁共享；排它锁互斥，要获取锁，同一时间只有一个用户能够操作。

### MySQL的锁策略有什么？
答：就是行锁（开销大）和表锁（开销小）。

### 数据库死锁如何解决？
答：超时等待和等待图（wait-graph）。

超时等待：事务等待时间超时就会回滚。

等待图：由锁的信息链表和事务等待链表组成，若图中存在环，就回滚undo量最小的事务。

### varchar和char的区别
答：varchar存储可变字符串，char存储定长字符串。char的存取速度更快。

### MySQL数据类型有哪些优化策略？
答：
1. 更小的通常更好：一般尽量使用可以正确存储数据的最小数据类型。（主要更快）
2. 尽可能简单：比如说，整数比字符操作代价更低；使用MySQL的内建类型date、time、datetime而不是字符串。
3. 尽量避免使用null，最好指定列为非null。

### 空间索引
答：MyISAM支持空间索引，可以用做地理数据存储。（MySQL对GIS的支持并不完善，一般不会使用这个特性）

### 全文索引
答：MyISAM支持全文索引，全文索引是一种关键字到文档的对应关系。

### trace是干什么的？
答：（从MySQL5.6开始）通过trace文件进一步获取优化器是如何选择执行计划的。

### MySQL主从复制的作用？
答：负载均衡，主写从读；数据的异地备份；高可用和故障切换。 

### 简述Memory存储引擎
答：Memory存储引擎数据存储在内存中，使用hash索引，速度非常快，但是使用表级锁，因此并发写入性能比较低。

### 一个MySQL查询过程发生了什么
答：
1）客户端（运行程序）先通过连接器连接到MySql服务器。

2）连接器通过数据库权限身份验证后，会先查询数据库缓存是否存在（之前执行过相同条件的SQL查询），如果有会直接返回缓存中的数据。如果没有则会进入分析器。

3）进入分析器后会对SQL语句进行词法语法的分析，判断该SQL语句是否存在词法语法错误，如果存在词法语法错误，会直接返回给客户端错误，如果正确则会进入优化器。

4）优化器会对SQL语句进行优化处理：例如：如果一条语句用到了多个索引会判断哪个索引性能更好。

5）最终会进入执行器，开始执行SQL语句直到查询出满足条件的所有数据，然后进行返回。

[一个MySQL查询过程发生了什么](https://www.cnblogs.com/beyond-succeed/p/12572082.html)



![image-20210817180905484](../../../asserts/数据库面试题/image-20210817180905484.png)